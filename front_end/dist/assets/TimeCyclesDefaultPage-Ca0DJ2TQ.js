import{q as e}from"./index-CLjfCghb.js";import{p as t,h as a,c as l}from"./utils-CCWp7rz6.js";import{g as s}from"./index-D8OW3JgT.js";import{n as r}from"./index-BqV8YcGQ.js";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"background-color":"rgb(45, 45, 45)"}},[a("el-row",{staticStyle:{border:"0.5px solid rgb(111, 111, 111)"}},[a("el-col",{attrs:{span:21}},[a("div",{staticClass:"el-subheader"},[e._v(" Time Cycle Status: "+e._s()+" ")])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"el-subheader"},[e._v(" Total Number: "+e._s()+" ")])])],1),a("el-row",{staticStyle:{border:"0.5px solid rgb(111, 111, 111)"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"rgb(45, 45, 45)"},attrs:{height:"65vh",data:e.filteredTimeCycleData,"sort-method":e.customSortMethodForProgressColumn,"header-cell-style":{background:"#404040",color:"#FFFFFF",font:"14px"},"empty-text":"NO DATA DISPLAY","element-loading-text":"Data Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)"}},[a("el-table-column",{attrs:{width:null,"min-width":5}}),a("el-table-column",{attrs:{prop:"ATA",label:"ATA",sortable:"",width:null,"min-width":30,filters:e.ataFilters,"filter-method":e.filterHandler}}),a("el-table-column",{attrs:{prop:"MemberSystemName",label:"Equipment Name",sortable:"",width:null,"min-width":100,filters:e.memberSystemNameFilters,"filter-method":e.filterHandler},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v(" Equipment Name "),a("el-input",{staticStyle:{"margin-left":"2vh","margin-right":"1vh",width:"15vh"},attrs:{size:"mini",placeholder:"Equipment Name",clearable:""},model:{value:e.searchEquipmentNameInput,callback:function(t){e.searchEquipmentNameInput=t},expression:"searchEquipmentNameInput"}}),a("i",{staticClass:"el-icon-search"})]}}])}),a("el-table-column",{attrs:{prop:"avail",label:"Availability",sortable:"",width:null,"min-width":40,formatter:e.formatAvailablilty,filters:e.availFilters,"filter-method":e.filterHandler}}),a("el-table-column",{attrs:{prop:"status",label:"Status",sortable:"",width:null,"min-width":70},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v(" Status "),a("el-input",{staticStyle:{width:"15vh","margin-left":"2vh","margin-right":"1vh"},attrs:{size:"mini",placeholder:"Status",clearable:""},model:{value:e.searchStatusInput,callback:function(t){e.searchStatusInput=t},expression:"searchStatusInput"}}),a("i",{staticClass:"el-icon-search"})]}}])}),a("el-table-column",{attrs:{prop:"hours",label:"Hours",width:null,formatter:e.formatHours,"min-width":30}}),a("el-table-column",{attrs:{prop:"cycles",label:"Cycles",width:null,formatter:e.formatCycles,"min-width":30}}),a("el-table-column",{attrs:{label:"Retrieval Data",width:null,"min-width":30},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"table-outer-button",staticStyle:{"background-color":"rgb(60, 60, 60)",color:"aliceblue","font-weight":"bold",border:"1px solid rgb(111, 111, 111)"},on:{click:function(a){return e.sendOrder(t.row)}}},[e._v("Retrieval")])]}}])}),a("el-table-column",{attrs:{width:null,"min-width":5}})],1),a("div",{staticClass:"table-outer-tc"},[e._v(' Notes: Data marked with "*" is obtained by calculating When the MS compute module fails '),a("el-button",{staticClass:"table-outer-button",attrs:{slot:"reference",circle:"",icon:"el-icon-refresh"},on:{click:e.flashData},slot:"reference"})],1)],1)],1)},n=[];const o={};var c=r({data:()=>({timeCycleData:[],currenTimeCyclesTimer:{},loading:!0,searchStatusInput:"",searchEquipmentNameInput:"",timeCycleDataCountTotal:0,ataFilters:[],memberSystemNameFilters:[],availFilters:[]}),methods:{filterHandler(e,t,a){if("all"===e)return!0;return t[a.property]===e},formatAvailablilty:e=>"1"==e.avail?"Available":"Unavailable",formatHours:e=>"0"==e.avail?"--":e.avail,formatHours:e=>"0"==e.hours?"--":e.hours,formatCycles:e=>"0"==e.cycles?"--":e.cycles,goSelectPage(){this.$router.push({name:"TimeCyclesSelect"})},createFilters(){this.ataFilters=Array.from(new Set(this.timeCycleData.map((e=>e.ATA)))).map((e=>{const t=this.timeCycleData.filter((t=>t.ATA===e));return{text:e,value:e,count:t.length}})),this.ataFilters.push({text:"all",value:"all",count:this.timeCycleData.length}),this.memberSystemNameFilters=Array.from(new Set(this.timeCycleData.map((e=>e.MemberSystemName)))).map((e=>{const t=this.timeCycleData.filter((t=>t.MemberSystemName===e));return{text:e,value:e,count:t.length}})),this.memberSystemNameFilters.push({text:"all",value:"all",count:this.timeCycleData.length}),this.availFilters=Array.from(new Set(this.timeCycleData.map((e=>e.avail)))).map((e=>{const t=this.timeCycleData.filter((t=>t.avail===e));return{text:e,value:e,count:t.length}})),this.availFilters.push({text:"all",value:"all",count:this.timeCycleData.length})},flashData(){s().then((e=>{this.timeCycleData=e,this.createFilters()})).catch((e=>{})),this.loading=!0,setTimeout((()=>{this.loading=!1}),1e3)},sendOrder(t){if("1"==t.support)if("0"!==t.avail)this.$message("This equipment is currently unavailable");else{let a=e.stringify({OrderType:"TCRETRIEVE",currentPage:"timeCycles",selectedEquipmentID:t.memberSystemId});this.handleTestOrder(a),this.$message({message:"Successfully retrieval",type:"success"})}else this.$message("This equipment is currently unsupportable")},sendOrderAll(){let t=e.stringify({OrderType:"TCRETRIEVE",currentPage:"timeCycles",selectedEquipmentID:[]});this.handleTestOrder(t),this.$message({message:"Successfully selected",type:"success"})},printPage:t,handleTestOrder:a,customSortMethodForProgressColumn:l},computed:{filteredTimeCycleData(){return this.timeCycleDataCountTotal=this.timeCycleData.filter((e=>e.MemberSystemName.toLowerCase().includes(this.searchEquipmentNameInput.toLowerCase())&&e.status.toLowerCase().includes(this.searchStatusInput.toLowerCase()))).length,this.timeCycleData.filter((e=>e.MemberSystemName.toLowerCase().includes(this.searchEquipmentNameInput.toLowerCase())&&e.status.toLowerCase().includes(this.searchStatusInput.toLowerCase())))}},created(){this.flashData()},beforeDestroy(){clearInterval(this.currenTimeCyclesTimer)}},i,n,!1,m,null);function m(e){for(let t in o)this[t]=o[t]}const u=function(){return c.exports}();export{u as default};
