var t=Object.defineProperty,e=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(e,r,s)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s,o=(t,e)=>{for(var r in e||(e={}))a.call(e,r)&&i(t,r,e[r]);if(s)for(var r of s(e))n.call(e,r)&&i(t,r,e[r]);return t},l=(t,s)=>e(t,r(s));import{p as d,h as u,c}from"./utils-CCWp7rz6.js";import{C as T}from"./index-B9YNel-W.js";import{t as m}from"./enums-DTBVM0QW.js";import{q as h}from"./index-CLjfCghb.js";import{n as g}from"./index-BqV8YcGQ.js";var p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"background-color":"rgb(45, 45, 45)"}},[r("el-header",{staticStyle:{height:"8vh"}},[r("el-row",{staticStyle:{width:"100%"}},[r("el-col",{attrs:{span:21}},[r("div",{staticClass:"el-header-title"},[t._v(" Test Status: "+t._s(t.curTotalStatus)+" ")])]),r("el-col",{attrs:{span:3}},[r("Clock")],1)],1)],1),r("el-main",[r("el-row",{staticStyle:{border:"0.5px solid rgb(111, 111, 111)"}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"background-color":"rgb(46, 45, 45)"},attrs:{"highlight-current-row":"",height:"71vh",data:t.currentGroundTestLists,"sort-method":t.customSortMethodForProgressColumn,"header-cell-style":{background:"#404040",color:"#FFFFFF",font:"14px"},"empty-text":"NO DATA DISPLAY","element-loading-text":"Data Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)","row-class-name":t.rowTestName},on:{"row-click":t.handleRowClick}},[r("el-table-column",{attrs:{width:null,"min-width":5}}),r("el-table-column",{attrs:{prop:"ATA",label:"ATA",sortable:"",width:null,"min-width":50}}),r("el-table-column",{attrs:{prop:"MemberSystemName",label:"Equipment Name",sortable:"",width:null,"min-width":100}}),r("el-table-column",{attrs:{prop:"InitiatedTestName",label:"Test Name",sortable:"",width:null,"min-width":180}}),r("el-table-column",{attrs:{prop:"StartTime",label:"Start Time",sortable:"",width:null,"min-width":60,formatter:t.formatStartTime}}),r("el-table-column",{attrs:{prop:"InitiatedTest_Status",label:"Status",width:null,"min-width":80,formatter:t.formatTestStatus}}),r("el-table-column",{attrs:{prop:"progress",label:"Progress",sortable:"",width:null,"min-width":80},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-progress",{attrs:{percentage:e.row.progress,color:t.getProgressColor(e.row.progress),format:function(t){return t+"%"},"stroke-width":14,"text-color":"#ffffff","define-back-color":"#505050","stroke-linecap":"square"}})]}}])}),r("el-table-column",{attrs:{width:null,"min-width":5}})],1),r("div",{staticClass:"table-outer-number"},[t._v(" Number of Tests: "+t._s(t.currentGroundTestLists.length)+" ")])],1)],1),r("el-footer",[r("div",[r("button",{staticClass:"footer-btn",on:{click:t.printPage}},[t._v("PRINT")])]),r("div",[r("button",{staticClass:"footer-btn",attrs:{disabled:!["2","5","6","7"].includes(t.selectedRow.InitiatedTest_Status)},on:{click:t.goViewDetailPage}},[t._v("VIEW DETAILS")]),r("button",{staticClass:"footer-btn",attrs:{disabled:!["3","8"].includes(t.selectedRow.InitiatedTest_Status)},on:{click:t.goInteractiveTextPage}},[t._v("RESPOND")]),r("button",{staticClass:"footer-btn",on:{click:t.goNewTestPage}},[t._v("NEW TEST")]),r("button",{staticClass:"footer-btn",attrs:{disabled:!["0","3","4"].includes(t.selectedRow.InitiatedTest_Status)},on:{click:t.sendAbort}},[t._v("ABORT TEST")]),r("button",{staticClass:"footer-btn",attrs:{disabled:t.currentGroundTestLists.every((function(t){return![0,3,4].includes(t.InitiatedTest_Status)}))},on:{click:t.sendAbortAll}},[t._v("ABORT ALL")])])])],1)},b=[];const f={};var w=g({data:()=>({selectedRow:"",tableListTimer:"",refreshInterval:"",currentGroundTestLists:[],loading:!0,acReg:"C-WXWB",currentTime:"",currentDate:""}),components:{Clock:T},methods:{handleRowClick(t){this.selectedRow=t,this.$store.state.groundTestList.currentGroundTestID=t.InitiatedTest_Index},getProgressColor:t=>"#51cef1",formatStartTime:t=>t.StartTime?new Date(t.StartTime).toLocaleString():"-",formatTestStatus(t){let e=t.InitiatedTest_Status;return m[e]},rowTestName({row:t}){return this.selectedRow.InitiatedTest_Index==t.InitiatedTest_Index&&this.selectedRow.StartTime==t.StartTime?"current-row":""},sendAbort(){let t=h.stringify({OrderType:"ABORT",currentPage:"TestList",InitiatedTest_Index:[this.selectedRow.InitiatedTest_Index],MemberSystemID:"",currentScreenId:"",selectedOption:""});this.handleTestOrder(t)},sendAbortAll(){let t=h.stringify({OrderType:"ABORTALL",currentPage:"TestList",InitiatedTest_Index:"",MemberSystemID:"",currentScreenId:"",selectedOption:""});this.handleTestOrder(t)},goNewTestPage(){this.$router.push({name:"SelectTestNew"})},goInteractiveTextPage(){this.$router.push({name:"InteractiveTest"})},goViewDetailPage(){""!==this.selectedRow?this.$router.push({name:"ViewDetail"}):this.$message({message:"Please select a test to view details",type:"warning"})},updateCurrentGroundTestLists(){this.currentGroundTestLists=this.$store.state.groundTestList.currentActiveGroundTests.filter((t=>0==parseInt(t.FlightLeg))).map((t=>{if("2"==t.InitiatedTest_Status||"9"==t.InitiatedTest_Status)return l(o({},t),{progress:parseFloat(100)});if("0"==t.InitiatedTest_Status||"5"==t.InitiatedTest_Status||"7"==t.InitiatedTest_Status||"6"==t.InitiatedTest_Status)return l(o({},t),{progress:parseFloat(0)});{const e=(new Date).getTime(),r=new Date(t.StartTime).getTime();return l(o({},t),{progress:parseInt(Math.min((e-r)/(600*t.TestDurationTime),99))})}}))},printPage:d,handleTestOrder:u,customSortMethodForProgressColumn:c},created(){setTimeout((()=>{this.loading=!1}),1e3),this.$store.state.groundTestList.currentGroundTestID="",this.$store.state.groundTestList.currentGroundTest={}},computed:{curTotalStatus(){if(0===this.currentGroundTestLists.length)return"No Test Data To Display";let t=!1,e=!1;for(let r=0;r<this.currentGroundTestLists.length;r++)3===this.currentGroundTestLists[r].InitiatedTest_Status&&(t=!0),4===this.currentGroundTestLists[r].InitiatedTest_Status&&(e=!0);return t?"Input Required":e?"Tests In Progress":"No Test In Progress"}},beforeDestroy(){clearInterval(this.$store.state.groundTestList.currentGroundTestTimer),clearInterval(this.refreshInterval)},mounted(){this.updateCurrentGroundTestLists(),this.refreshInterval=setInterval((()=>{this.updateCurrentGroundTestLists()}),1e3)}},p,b,!1,I,"11839ed5");function I(t){for(let e in f)this[e]=f[e]}const S=function(){return w.exports}();export{S as default};
